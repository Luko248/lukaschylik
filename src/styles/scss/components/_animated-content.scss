@use "../abstracts/variables/_index" as *;
@use "../abstracts/functions/_index" as *;
@use "../abstracts/mixins/_index" as *;

@mixin create-animated-content {
  section:has(.content-fade-in) {
    view-timeline: --section-view block;
  }

  .content-fade-in {
    position: relative;
    opacity: var(--content_opacity, 1);
    scale: var(--content_scale, 1);
    transform-origin: var(--animation_trans-origin, left);
    z-index: 10;

    &--bottom {
      --animation_trans-origin: center;
    }

    @supports (view-timeline-name: --foo) {
      animation: var(--content_animation, content-fade-in forwards);
      animation-range-end: 80svb;
      animation-range-start: entry;
      animation-timeline: --section-view;
      will-change: opacity, scale;

      @starting-style {
        opacity: var(--content_opacity-start, 0);
        scale: var(--content_scale-start, 0.95);
      }
    }

    @include mq-reduce-motion {
      opacity: 1;
      animation: none;
      scale: 1;
    }
  }

  @keyframes content-fade-in {
    0%,
    20% {
      opacity: 0;
      scale: 0.95;
    }

    50%,
    100% {
      opacity: 1;
      scale: 1;
    }
  }
}
